<section class="shared-container relative justify-center chess-container">
  <div>Player {{ currentPlayer === 1 ? "white" : "black" }}'s go</div>
  <div class="flex flex-col gap-y-4">
    <chess-card-player [player]="2"></chess-card-player>
    <div class="chess-board">
      @for(ROW of chessBoardView; track "x-"+x; let x = $index){ @for(PIECE of
      ROW; track "y-"+y; let y = $index){
      <div
        class="chess-square"
        [id]="'square-' + x + '-' + y"
        [ngClass]="[
          getSquareColor(x, y),
          getPiecePlayer(PIECE),
          isSquarePromotionSquare(x, y),
          isSquareChecked(x, y),
          isSquareSelected(x, y),
          isSquareLastMove(x, y)
        ]"
        (click)="move(x, y)"
      >
        <div
          [ngClass]="{ 'safe-square': isSquareSafeForSelectedPiece(x, y) }"
        ></div>
        <div class="piece">
          @if(getPiece(PIECE); as piece){
          <ng-container *ngComponentOutlet="piece"></ng-container>
          }
        </div>
      </div>
      } } @if(isPromotionActive || true){
      <div class="promotion-dialog">
        <span
          class="close-promotion-dialog"
          (click)="closePawnPromotionDialog()"
        >
          &times;
        </span>
        @for(PIECE_SYMBOL of getPromotionPieces(); track "pp-"+$index){
        @if(getPiece(PIECE_SYMBOL); as piece){
        <div
          class="piece w-full h-[25%] piece-promotion-style"
          [ngClass]="[getPiecePlayer(PIECE_SYMBOL)]"
        >
          <ng-container
            *ngComponentOutlet="piece"
            (click)="promotePiece(PIECE_SYMBOL)"
          ></ng-container>
        </div>
        } }
      </div>
      }
    </div>
    <chess-card-player [player]="1" />
  </div>
</section>
