<section
  class="shared-container relative justify-center chess-container flex !flex-row gap-x-4"
>
  <div class="chess-game-container">
    <chess-card-player [player]="2"></chess-card-player>
    <div class="chess-board">
      @for(ROW of chessBoardView; track "x-"+x; let x = $index){ @for(PIECE of
      ROW; track "y-"+y; let y = $index){
      <div
        class="chess-square"
        [id]="'square-' + x + '-' + y"
        [ngClass]="[
          getSquareColor(x, y),
          getPiecePlayer(PIECE),
          isSquarePromotionSquare(x, y),
          isSquareChecked(x, y),
          isSquareSelected(x, y),
          isSquareLastMove(x, y)
        ]"
        (click)="move(x, y)"
      >
        <div
          [ngClass]="{ 'safe-square': isSquareSafeForSelectedPiece(x, y) }"
        ></div>
        <div class="piece">
          @if(getPiece(PIECE); as piece){
          <ng-container *ngComponentOutlet="piece"></ng-container>
          }
        </div>
      </div>
      } } @if(isPromotionActive){
      <div class="promotion-dialog">
        <div
          class="close-promotion-dialog"
          (click)="closePawnPromotionDialog()"
        >
          &times;
        </div>
        @for(PIECE_SYMBOL of getPromotionPieces(); track "pp-"+$index){
        @if(getPiece(PIECE_SYMBOL); as piece){
        <div
          class="piece w-full h-[22%] piece-promotion-style cursor-pointer"
          [ngClass]="[getPiecePlayer(PIECE_SYMBOL)]"
          (click)="promotePiece(PIECE_SYMBOL)"
        >
          <ng-container *ngComponentOutlet="piece"></ng-container>
        </div>
        } }
      </div>
      }
    </div>
    <chess-card-player [player]="1" />
  </div>
  <div class="chess-side-board">
    <div class="chess-side-board-container">
      <div class="player-controller-moves">
        <div class="controller-title"><span>Game moves</span></div>
        <div class="move-controller-container">
          <div class="flex justify-around items-start">
            <button
              class="inline-flex border-0 overflow-hidden rounded-lg max-w-full max-h-[30px] px-3"
            >
              <svg
                height="30px"
                width="30px"
                viewBox="0 -960 960 960"
                fill="#e8eaed"
              >
                <path
                  d="M400-80 0-480l400-400 61 61.67L122.67-480 461-141.67 400-80Z"
                />
              </svg>
            </button>
            <button
              class="inline-flex border-0 overflow-hidden rounded-lg max-w-full max-h-[30px]"
            >
              <svg
                height="30px"
                width="30px"
                viewBox="0 -960 960 960"
                fill="#e8eaed"
              >
                <path
                  d="m309.67-81.33-61-61.67L587-481.33 248.67-819.67l61-61.66 400 400-400 400Z"
                />
              </svg>
            </button>
          </div>
          <chess-move-list
            [moveList]="controller.gameHistory.moveList"
            [pointer]="controller.gameHistory.gameHistoryPointer"
            (showPreviousPositionEvent)="showPreviousPosition($event)"
          ></chess-move-list>
        </div>
      </div>
      <div></div>
    </div>
  </div>
</section>
